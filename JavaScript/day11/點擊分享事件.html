<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        #test, #another {
            width: 400px;
            margin:50px;
        }
        #demo {
            padding: 2px 10px;
            border: 1px solid #ff5c00;
            border-radius: 8px;
            width: 230px;
            position: absolute;
            height: 30px;
            top: 0;
            left: 0;
            display: none;
            background-color: #fff;
            padding-top: 10px;
        }
        #demo em {
            position: absolute;
            top: -5px;
            left: 40px;
            width: 10px;
            height: 5px;
            background: url(arrow.gif) no-repeat;
        }
    </style>
</head>
<body>
<span id="demo">
<div class="bshare-custom"><a title="分享到QQ空间" class="bshare-qzone"></a><a title="分享到新浪微博" class="bshare-sinaminiblog"></a><a title="分享到人人网" class="bshare-renren"></a><a title="分享到腾讯微博" class="bshare-qqmb"></a><a title="分享到网易微博" class="bshare-neteasemb"></a><a title="更多平台" class="bshare-more bshare-more-icon more-style-addthis"></a><span class="BSHARE_COUNT bshare-share-count">0</span></div><script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/buttonLite.js#style=-1&amp;uuid=&amp;pophcol=2&amp;lang=zh"></script><script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/bshareC0.js"></script>
</span>
<div id="test">我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字</div>
<div id="another">
    我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字
</div>
</body>
</html>
<script src="javascript.js" type="text/javascript"></script>
<script>
    function $(id) {
        return document.getElementById(id)
    }

    $("test").onmouseup=function (event) {
        var event=event||window.event
        var  pagex=event.pageX||scroll().left+event.clientX;
        var  pagey=event.pageY||scroll().top+event.clientY;
//        兼容式寫法 定位page頁中的定位點
//        判斷選中讀的內容
        var txt
        if(window.getSelection){
            txt=window.getSelection().toString();
        }

        else {
            txt=document.selection.createRange().text;
        }

        if(txt){
//            默認情況下txt在沒有定義變量類型和為“”時，它的布爾值為false,0
//            不為空則為真，true，1
            showbox($("demo"),pagex,pagey)
        }
    }

    document.onmousedown=function (event) {
        var  event=event||window.event
        var target=event.target?event.target.id:event.srcElement
        if(target!=$("demo")){
            $("demo").style.display="none"
        }
    }

    function showbox(obj,mousex,mousey) {
        obj.style.display="block"
        obj.style.left=mousex+"px"
        obj.style.top=mousey+"px"
    }
</script>